<html>

<head>
    <title> JS Drum Kit </title>
    <link rel="stylesheet" href="main.css">
</head>

<body>
    <div class = 'Keys'>
        <div data-key='65' class = 'Key'>
            <beat>A</beat>
            <span class='sound'>boom</span>
        </div>
        <div data-key='66' class = 'Key'>
            <beat>B</beat>
            <span class='sound'>clap</span>
        </div>
        <div data-key='67' class = 'Key'>
            <beat>C</beat>
            <span class='sound'>hihat</span>
        </div>
        <div data-key='68' class = 'Key'>
            <beat>D</beat>
            <span class='sound'>kick</span>
        </div>
        <div data-key='69' class = 'Key'>
            <beat>E</beat>
            <span class ='sound'>openhat</span>
        </div>
        <div data-key='70' class = 'Key'>
            <beat>F</beat>
            <span class='sound'>ride</span>
        </div>
    </div>
</body>

<audio data-key='65' src='./sounds/boom.wav'></audio>
<audio data-key='66' src='./sounds/clap.wav'></audio>
<audio data-key='67' src='./sounds/hihat.wav'></audio>
<audio data-key='68' src='./sounds/kick.wav'></audio>
<audio data-key='69' src='./sounds/openhat.wav'></audio>
<audio data-key='70' src='./sounds/ride.wav'></audio>


<script>
    function removeTransition(e) {
        if (e.propertyName !== 'transform') return;
        e.target.classList.remove('playing');
    }

    function playSound(e) {
        let audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
        let key = document.querySelector(`.Key[data-key="${e.keyCode}"]`);
        if(key && audio) {
            audio.currentTime = 0;
            audio.play();
            key.classList.add('playing');
        }
    }

    // remove the playing class
    const keys = Array.from(document.querySelectorAll('.Key'));
    keys.forEach(key => key.addEventListener('transitionend', removeTransition));
    window.addEventListener('keydown', playSound);
</script>

</html>
